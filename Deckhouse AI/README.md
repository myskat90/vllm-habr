# Демо 1. Суммаризация из PDF

**Цель для бизнеса:** быстро понять «что важного» в свежих выпусках ЦБ, увидеть числа и цитаты, не копаясь в документе.

## Что скачать

* «**О чём говорят тренды**», **№5 (июль2025)** — официальный PDF ЦБ: `bulletin_25-05.pdf`. ([Central Bank of Russia][1])
* «**ДИНАМИКА ПОТРЕБИТЕЛЬСКИХ ЦЕН**», **№7 (июль2025)** — официальный PDF ЦБ: `cpd_2025-7.pdf`. ([Central Bank of Russia][2])
  *(Опционально для сравнения по периоду: «Тренды», **№1 (февраль2025)** — `bulletin_25-01.pdf`.)* ([Central Bank of Russia][3])

Скачайте PDF‑файлы и **перетащите их в чат LM Studio** (режим «Chat with Documents» поддерживает PDF)

## Системный промпт

Вставьте как **System**:

```
Ты — аналитик. Работай ТОЛЬКО с прикреплёнными PDF.
Задача: дать понятное резюме для руководителя без лишней воды.

Формат ответа:
1) Короткий бриф (2–3 предложения) — что главное в документе.
2) Цифры, которые стоит запомнить (если есть): инфляция г/г и м/м, ключевая ставка (уровень/сигнал), динамика спроса/производства.
3) 3–5 ключевых тезисов (одна строка на тезис).
4) 2 короткие цитаты из PDF (≤20 слов, с указанием страницы).
5) Для бизнеса: что делать прямо сейчас (3 пункта).

Правила:
— Если в документе какого‑то числа НЕТ, так и напишите: «в документе не указано».
— Не придумывайте, опирайтесь на текст PDF; указывайте страницы рядом с цитатами.
— Пишите на русском языке просто и по делу.
```

## Промпты

**1) «Расскажи, что главное»**

```
Суммаризируй каждый документ по шаблону из System. Сделай две отдельные выжимки: (а) «Тренды №5 (июль 2025)», (б) «ДПЦ №7 (июль 2025)».
Говори простыми словами; цифры и цитаты — только из PDF, с указанием страниц.
```

**2) «Сравни выпуск с выпуском»**

```
Сравни «Тренды №5 (июль 2025)» и «ДПЦ №7 (июль 2025)»: 
— совпадают ли оценки инфляции и драйверов; 
— какой тон денежно‑кредитной политики (жёстче/мягче/нейтрально); 
— 5 практических рекомендаций для бизнеса на ближайший месяц.
```

---

# Демо 2. Обновляемая локальная витрина данных (на примере ключевой ставки + USD)

**Цель для бизнеса:** за 2–3 минуты получить ясную картину: что происходило с ключевой ставкой и долларом за 14 дней, и какие действия нужны закупкам/прайсингу.

## Подготовка MCP

В Windows установить uvx:

```shell
 powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

В LM Studio: **Program → Install → Edit `mcp.json`** — добавьте **два** сервера:

```json
{
  "mcpServers": {
    "fetch":  { "command": "uvx", "args": ["mcp-server-fetch"] },
    "chroma": { "command": "uvx", "args": ["chroma-mcp", "--client-type","persistent",
                 "--data-dir","C:\\Users\\<ВАШ_ПОЛЬЗОВАТЕЛЬ>\\.lmstudio\\kb"] }
  }
}
```

* LM Studio официально поддерживает локальные/удалённые MCP и редактирование `mcp.json` из UI. ([LM Studio][4])
* `mcp-server-fetch` — официальный Fetch MCP (`fetch`, поддержка чтения длинных страниц по частям `start_index`). ([PyPI][5])
* `chroma-mcp` — официальный сервер Chroma (create/add/query/update/delete, persistent). ([GitHub][6])

## Источники (только ЦБ РФ)

* **Key Rate** (таблица дат и значений; есть «Last updated on», можно задавать окно дат через параметры):
  `https://www.cbr.ru/eng/hd_base/KeyRate/`  — пример страницы с последними значениями. ([Central Bank of Russia][7])
* **Курсы валют (SXML)** — оф. документация «Получение данных, используя XML»:
  `XML_dynamic.asp?VAL_NM_RQ=<код>&date_req1=dd/mm/yyyy&date_req2=dd/mm/yyyy`
  Коды: **USD=R01235**, **EUR=R01239**, **CNY=R01375**. ([Central Bank of Russia][8])

## Системный промпт

Вставьте как **System**:

```
Ты — финансовый ассистент. Ты можешь использовать только два инструмента: 
fetch (HTTP GET) и chroma_* (локальная база знаний Chroma, коллекция "finance_ru").

Цель: за один показ собрать и сохранить данные ЦБ за месяц и сразу показать витрину:
— краткий бриф (2–3 предложения);
— таблица «Дата | Ключевая ставка | USD (курс ЦБ) | Δ USD d/d»;
— 3–5 коротких рекомендаций закупкам/прайсингу.

Правила устойчивости:
— Источники ТОЛЬКО cbr.ru: KeyRate (HTML‑таблица) и XML_dynamic.asp (USD=R01235).
— В XML_dynamic параметры только в формате dd/mm/yyyy; date_req1 ≤ date_req2; 
  нормализуй десятичную запятую в точку; если Nominal ≠ 1 — дели Value на Nominal.
— Соблюдай ограничение «один tool‑вызов на сообщение»: 
  сначала fetch, в следующем сообщении — запись в Chroma и витрина.
— Внизу ответа всегда указывай точные URL и время доступа (UTC).
— Отвечай всегда на русском языке. Пиши просто и по делу.
```

## Сообщения

**A) Создать локальную базу:**

```
Создай коллекцию Chroma "finance_ru" (persistent).
Метаданные: {"schema":"finance@1.0","owner":"workshop"}.
```

**B) Получить ключевую ставку за месяц:**

```
fetch

{"url":"https://www.cbr.ru/eng/hd_base/KeyRate/?UniDbQuery.From=2025-09-10&UniDbQuery.To=2025-10-09&UniDbQuery.Posted=True"}
```

*(Это официальная страница Key Rate с таблицей «Date | Rate».)* ([Central Bank of Russia][7])

**C) Сохранить ставку и показать мини‑таблицу:**

```
Извлеки (Дата → Ставка) из полученного HTML и сохрани в "finance_ru". 
Покажи мини‑таблицу «Дата | Ключевая ставка» только в пределах 2025‑09‑10…2025‑10‑09.
```

**D) Получить курс USD за месяц:**

```
fetch

{"url":"https://www.cbr.ru/scripts/XML_dynamic.asp?VAL_NM_RQ=R01235&date_req1=10/09/2025&date_req2=09/10/2025"}
```

*(Док‑страница SXML с правилами и кодами валют — на официальном сайте ЦБ.)* ([Central Bank of Russia][8])

**E) Распарсить USD, записать и сразу вывести витрину «за месяц»:**

```
Извлеки из XML пары «Дата → курс USD» (замени запятую на точку; если есть <Nominal>≠1 — приведи к 1 единице).
Сохрани в "finance_ru".
Затем построй витрину за 2025‑09‑10…2025‑10‑09:
— бриф (2–3 предложения о том, как вёл себя USD и что происходило со ставкой);
— таблица: Дата | Ключевая ставка | USD (курс ЦБ) | Δ USD d/d;
— 3–5 коротких рекомендаций для закупок/прайсинга.
Внизу укажи точные URL источников и время доступа (UTC).
```

**Опционально:** добавьте **EUR** и **CNY** тем же образом:
`R01239` и `R01375` соответственно (тот же диапазон дат). ([Central Bank of Russia][8])

---

[1]: https://cbr.ru/collection/collection/file/57021/bulletin_25-05.pdf?utm_source=chatgpt.com "№ 5"
[2]: https://www.cbr.ru/collection/collection/file/57161/cpd_2025-7.pdf?utm_source=chatgpt.com "ДИНАМИКА ПОТРЕБИТЕЛЬСКИХ ЦЕН"
[3]: https://www.cbr.ru/collection/collection/file/55064/bulletin_25-01.pdf?utm_source=chatgpt.com "О чем говорят тренды. Макроэкономика и рынки"
[4]: https://lmstudio.ai/docs/app/plugins/mcp?utm_source=chatgpt.com "Use MCP Servers | LM Studio Docs"
[5]: https://pypi.org/project/mcp-server-fetch/?utm_source=chatgpt.com "mcp-server-fetch"
[6]: https://github.com/chroma-core/chroma-mcp?utm_source=chatgpt.com "chroma-core/chroma-mcp: A Model Context Protocol ..."
[7]: https://www.cbr.ru/eng/hd_base/KeyRate/?utm_source=chatgpt.com "Key Rate | Bank of Russia"
[8]: https://www.cbr.ru/development/sxml/?utm_source=chatgpt.com "Получение данных, используя XML"
[9]: https://www.cbr.ru/scripts/XML_dynamic.asp?VAL_NM_RQ=R01235&date_req1=01.08.2016&date_req2=18.08.2016&mode=1%5B1%5D&rt=1&utm_source=chatgpt.com "http://www.cbr.ru/scripts/XML_dynamic.asp?VAL_NM_RQ= ..."
